# コーディング規約（.go）

基本的には Go の組み込みのフォーマッター(gofmt)を使用してください。  
また、Linter として golangci を導入しているので適宜実行して静的解析を行ったうえで push するようにしてください。（GitHubActions でも設定しているので通過しない場合はマージできません）  
Linter の設定項目としては以下を設定しています。

- govet
- misspell
- errcheck
- staticcheck
- prealloc
- ineffassign

## 必須

- フォルダ名は小文字の英字のみで作成すること。長すぎる場合は子フォルダを作成してパッケージを分けてください。
- ファイル名は小文字の英字でスネークケース（snake_case）とすること。
- 変数名/関数名はプライベートの場合はローワーキャメル（lowerCamel）、パブリックの場合はアッパーキャメル（UpperCamel）とすること。
  - 例外的に固有名詞の単語についてはキャメルケースではなく英数大文字とすること。（一般的な固有名詞に関しては golangci でチェックが行われます）
    - 例）NG: commentsCsv, OK: commentsCSV
- レシーバーやクライアントなどを関数処理内で使用する場合はなるべく省略形を用いること。（おそらくエディターがコード補完で出してくれるのでそれに従う）
  - 例）commentPersistence → cp
- 変数名が長すぎる場合は適切なスコープとなっていない場合が多いため処理を分割するか関数化を検討すること。
- データを取得する関数名のプレフィックスに Get は用いないこと。ただし、外部との通信が発生するものには明示的にプレフィックスとして Fetch を付与すること。
  - 例）NG: GetComments(), OK: Comments(), OK: FetchFromGoogle()
- パッケージ名はなるべく 1 単語で完結に命名すること。ただし、汎用的な名前を付けないように注意してください。
  - 例）NG: package common_comments_module, NG: package common, OK: package comments
- エラーを受け取る変数の名前は必ず `err` とすること。`xxxErr` のようにサフィックスとして表現しなければいけない場合はスコープを狭めたり関数化を検討すること。
- テストを書く際は TableDriven テストとすること。

## 推奨

- [UberStyle](https://github.com/knsh14/uber-style-guide-ja/blob/master/guide.md)に準拠とするのでよく読んだうえで可能な限り実装で心がけるようにしましょう。
- パッケージ名とフォルダ名が違っていても問題はありませんがなるべく同じものを使用するようにし、可能であれば別パッケージとして実装することを検討しましょう。
- ディレクトリの構造上、同一パッケージ名となってしまう場合はエイリアスを使用してインポートするようにしましょう。使用用途が限定的であれば internal パッケージにすることも検討してください。
- レシーバ名を省略形にする場合、他の場所で使用する際もなるべく同じ省略形を使用するようにしましょう。
  - 例） NG: Client → c or cl, OK: Client → c
